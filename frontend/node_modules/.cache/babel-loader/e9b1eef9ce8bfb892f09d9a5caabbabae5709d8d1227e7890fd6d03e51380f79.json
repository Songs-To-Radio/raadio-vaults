{"ast":null,"code":"import _regeneratorRuntime from\"/Users/macbook/Desktop/BlockChain Projects/Hackerthon/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/macbook/Desktop/BlockChain Projects/Hackerthon/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macbook/Desktop/BlockChain Projects/Hackerthon/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Text from\"./texts\";import Button from\"./button\";import{useContext,useEffect,useState}from\"react\";import{UserContext}from\"../contexts/user.contexts\";import{saveWhiteList}from\"../api/api\";import{toast}from\"react-toastify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Whitelist(){var _useContext=useContext(UserContext),user=_useContext.user,setUser=_useContext.setUser,setVaults=_useContext.setVaults,account=_useContext.account;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];function save(){toast.promise(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return saveWhiteList(list.replaceAll(\" \",\"\").split(\",\"),account);case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);throw _context.t0;case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);})),{pending:\"Saving WhiteList\",success:{render:function render(_ref2){var data=_ref2.data;setUser(data.user);setVaults(data.metadatas);return\"Success!\";}},error:{render:function render(_ref3){var data=_ref3.data;return\"Oops! Something went wrong\";}}});}useEffect(function(){if(user){var _list=user.whiteList.join(\", \");setList(_list);}},[user]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"my-20\",children:[/*#__PURE__*/_jsx(Text,{size:\"mid\",cls:\"text-[18px] font-semibold pl-5 w-fit m-auto\",children:\"Whitelisted Domains\"}),/*#__PURE__*/_jsx(Text,{cls:\"text-center my-3\",children:\"The following Domains would be given access to Masked Stream your media from IPFS. Please seperate domains with (,) or ( , ) or (, )\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"m-auto block text-[13px] my-10 border rounded-xl border-theme-red w-[300px] p-3\",rows:4,value:list,onChange:function onChange(e){var val=e.target.value;setList(val);}}),/*#__PURE__*/_jsx(Button,{label:\"save\",cls:\"block m-auto\",onClick:save})]})});}","map":{"version":3,"names":["Text","Button","useContext","useEffect","useState","UserContext","saveWhiteList","toast","Whitelist","user","setUser","setVaults","account","list","setList","save","promise","replaceAll","split","console","log","pending","success","render","data","metadatas","error","whiteList","join","e","val","target","value"],"sources":["/Users/macbook/Desktop/BlockChain Projects/Hackerthon/frontend/src/components/whitelist.jsx"],"sourcesContent":["import Text from \"./texts\";\nimport Button from \"./button\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { UserContext } from \"../contexts/user.contexts\";\nimport { saveWhiteList } from \"../api/api\";\nimport { toast } from \"react-toastify\";\n\nexport default function Whitelist() {\n  const { user, setUser, setVaults, account } = useContext(UserContext);\n  const [list, setList] = useState(\"\");\n\n  function save() {\n    toast.promise(\n      async () => {\n        try {\n          return await saveWhiteList(list.replaceAll(\" \", \"\").split(\",\"), account);\n        } catch (error) {\n          console.log(error);\n          throw error;\n        }\n      },\n      {\n        pending: \"Saving WhiteList\",\n        success: {\n          render({ data }) {\n            setUser(data.user);\n            setVaults(data.metadatas);\n            return `Success!`;\n          },\n        },\n        error: {\n          render({ data }) {\n            return \"Oops! Something went wrong\";\n          },\n        },\n      }\n    );\n  }\n\n  useEffect(() => {\n    if (user) {\n      let list = user.whiteList.join(\", \");\n      setList(list);\n    }\n  }, [user]);\n\n  return (\n    <div>\n      <div className=\"my-20\">\n        <Text size=\"mid\" cls={\"text-[18px] font-semibold pl-5 w-fit m-auto\"}>\n          Whitelisted Domains\n        </Text>\n        <Text cls={\"text-center my-3\"}>\n          The following Domains would be given access to Masked Stream your\n          media from IPFS.\n          Please seperate domains with (,) or ( , ) or (, )\n        </Text>\n\n        <textarea\n          className=\"m-auto block text-[13px] my-10 border rounded-xl border-theme-red w-[300px] p-3\"\n          rows={4}\n          value={list}\n          onChange={(e) => {\n            let val = e.target.value;\n            setList(val);\n          }}\n        ></textarea>\n        <Button label={\"save\"} cls={\"block m-auto\"} onClick={save} />\n      </div>\n    </div>\n  );\n}\n"],"mappings":"4cAAA,MAAOA,KAAI,KAAM,SAAS,CAC1B,MAAOC,OAAM,KAAM,UAAU,CAC7B,OAASC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACvD,OAASC,WAAW,KAAQ,2BAA2B,CACvD,OAASC,aAAa,KAAQ,YAAY,CAC1C,OAASC,KAAK,KAAQ,gBAAgB,CAAC,wFAEvC,cAAe,SAASC,UAAS,EAAG,CAClC,gBAA8CN,UAAU,CAACG,WAAW,CAAC,CAA7DI,IAAI,aAAJA,IAAI,CAAEC,OAAO,aAAPA,OAAO,CAAEC,SAAS,aAATA,SAAS,CAAEC,OAAO,aAAPA,OAAO,CACzC,cAAwBR,QAAQ,CAAC,EAAE,CAAC,wCAA7BS,IAAI,eAAEC,OAAO,eAEpB,QAASC,KAAI,EAAG,CACdR,KAAK,CAACS,OAAO,wEACX,2KAEiBV,cAAa,CAACO,IAAI,CAACI,UAAU,CAAC,GAAG,CAAE,EAAE,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAEN,OAAO,CAAC,+GAExEO,OAAO,CAACC,GAAG,aAAO,CAAC,sFAGtB,GACD,CACEC,OAAO,CAAE,kBAAkB,CAC3BC,OAAO,CAAE,CACPC,MAAM,uBAAW,IAARC,KAAI,OAAJA,IAAI,CACXd,OAAO,CAACc,IAAI,CAACf,IAAI,CAAC,CAClBE,SAAS,CAACa,IAAI,CAACC,SAAS,CAAC,CACzB,iBACF,CACF,CAAC,CACDC,KAAK,CAAE,CACLH,MAAM,uBAAW,IAARC,KAAI,OAAJA,IAAI,CACX,MAAO,4BAA4B,CACrC,CACF,CACF,CAAC,CACF,CACH,CAEArB,SAAS,CAAC,UAAM,CACd,GAAIM,IAAI,CAAE,CACR,GAAII,MAAI,CAAGJ,IAAI,CAACkB,SAAS,CAACC,IAAI,CAAC,IAAI,CAAC,CACpCd,OAAO,CAACD,KAAI,CAAC,CACf,CACF,CAAC,CAAE,CAACJ,IAAI,CAAC,CAAC,CAEV,mBACE,kCACE,aAAK,SAAS,CAAC,OAAO,wBACpB,KAAC,IAAI,EAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAE,6CAA8C,iCAE7D,cACP,KAAC,IAAI,EAAC,GAAG,CAAE,kBAAmB,kJAIvB,cAEP,iBACE,SAAS,CAAC,iFAAiF,CAC3F,IAAI,CAAE,CAAE,CACR,KAAK,CAAEI,IAAK,CACZ,QAAQ,CAAE,kBAACgB,CAAC,CAAK,CACf,GAAIC,IAAG,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CACxBlB,OAAO,CAACgB,GAAG,CAAC,CACd,CAAE,EACQ,cACZ,KAAC,MAAM,EAAC,KAAK,CAAE,MAAO,CAAC,GAAG,CAAE,cAAe,CAAC,OAAO,CAAEf,IAAK,EAAG,GACzD,EACF,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}